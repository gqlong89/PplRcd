#include "CtlTimer.h"
#include "cmsis_os.h"                                           // CMSIS RTOS header file
#include "sdhDef.h"
//============================================================================//
//            G L O B A L   D E F I N I T I O N S                             //
//============================================================================//
//周期性的执行任务的功能
//用于定时驱动的任务
//------------------------------------------------------------------------------
// const defines
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// module global vars
//------------------------------------------------------------------------------


//------------------------------------------------------------------------------
// global function prototypes
//------------------------------------------------------------------------------

//============================================================================//
//            P R I V A T E   D E F I N I T I O N S                           //
//============================================================================//

//------------------------------------------------------------------------------
// const defines
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// local types
//------------------------------------------------------------------------------

//------------------------------------------------------------------------------
// local vars
//------------------------------------------------------------------------------


//------------------------------------------------------------------------------
// local function prototypes
//------------------------------------------------------------------------------
static void Ctime_periodic (void const *arg);

static osTimerId ctime_id;                                           // timer id
static osTimerDef (ctime, Ctime_periodic);
//============================================================================//
//            P U B L I C   F U N C T I O N S                                 //
//============================================================================//

//=========================================================================//
//                                                                         //
//          P R I V A T E   D E F I N I T I O N S                          //
//                                                                         //
//=========================================================================//
/// \name Private Functions
/// \{

static void Init_ctime( Controller *self, void *arg)
{
	
	int	ret = RET_OK;
	osStatus status;                                              // function return status
	ctime_id = osTimerCreate (osTimer(ctime), osTimerPeriodic, self);
  if (ctime_id != NULL) {    // Periodic timer created
    // start timer with periodic 1000ms interval
    status = osTimerStart (ctime_id, 1000);            
    if (status != osOK) {
      // Timer could not be started
			ret = ERR_OPT_FAILED;
    }
  } 
	else 
	{
		ret = ERR_OPT_FAILED;
		
	}
	
	
	assert(ret == RET_OK);
	
	
}

//每秒执行一次
static void Ctime_periodic (void const *arg) 
{
  // add user code here
}
